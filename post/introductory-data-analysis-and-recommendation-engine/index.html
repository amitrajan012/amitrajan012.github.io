<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="Amit Rajan">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://amitrajan012.github.io/img/head.jpg">
    <meta property="twitter:image" content="https://amitrajan012.github.io/img/head.jpg" />
    

    
    <meta name="title" content="Content Based Movie Recommendation Engine" />
    <meta property="og:title" content="Content Based Movie Recommendation Engine" />
    <meta property="twitter:title" content="Content Based Movie Recommendation Engine" />
    

    
    <meta name="description" content="Content based recommendation engine">
    <meta property="og:description" content="Content based recommendation engine" />
    <meta property="twitter:description" content="Content based recommendation engine" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="Amit, Rajan, ML, Data, Science, Blockchain">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>Content Based Movie Recommendation Engine-Amit Rajan Blog</title>

    <link rel="canonical" href="/post/introductory-data-analysis-and-recommendation-engine/">

    
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" type="text/css">

    
    

    

    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
    }});</script>

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
    <script src="/js/jquery.min.js"></script>

    
    <script src="/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>




<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Amit Rajan</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                    
                    
		    
                        <li><a href="/top/about/">ABOUT</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/head.jpg')
    }
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/recommendation-engine" title="Recommendation Engine">
                            Recommendation Engine
                        </a>
                        
                        <a class="tag" href="/tags/unsupervised-learning" title="Unsupervised Learning">
                            Unsupervised Learning
                        </a>
                        
                        <a class="tag" href="/tags/content-based-filtering" title="Content based filtering">
                            Content based filtering
                        </a>
                        
                        <a class="tag" href="/tags/tfidf" title="tf–idf">
                            tf–idf
                        </a>
                        
                    </div>
                    <h1>Content Based Movie Recommendation Engine</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        
                            Posted by 
                            
                                    Amit Rajan
                             
                            on 
                            Monday, July 30, 2018
                            
                            
                            
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <h2 id="introduction">Introduction</h2>
<p>The dataset consists information of 5000 movies with their genres, budget, revenue, production company, revenue, user-rating , vote-count and popularity as the primary fields. It also has the detailed information of cast and crew.</p>
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># import modules</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> matplotlib <span style="color:#f92672">import</span> pyplot <span style="color:#66d9ef">as</span> plt
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> cufflinks <span style="color:#66d9ef">as</span> cf
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> seaborn <span style="color:#66d9ef">as</span> sns
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> plotly.graph_objs <span style="color:#66d9ef">as</span> go
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> plotly
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> wordcloud <span style="color:#f92672">import</span> WordCloud
</span></span><span style="display:flex;"><span>plotly<span style="color:#f92672">.</span>offline<span style="color:#f92672">.</span>init_notebook_mode()
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>set(style<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;whitegrid&#34;</span>)
</span></span><span style="display:flex;"><span>cf<span style="color:#f92672">.</span>set_config_file(world_readable<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,offline<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>movies <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;../DataSets/tmdb-5000-movie-dataset/tmdb_5000_movies.csv&#34;</span>)
</span></span><span style="display:flex;"><span>credits <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;../DataSets/tmdb-5000-movie-dataset/tmdb_5000_credits.csv&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>movies<span style="color:#f92672">.</span>head()
</span></span></code></pre></div></br>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>budget</th>
      <th>genres</th>
      <th>homepage</th>
      <th>id</th>
      <th>keywords</th>
      <th>original_language</th>
      <th>original_title</th>
      <th>overview</th>
      <th>popularity</th>
      <th>production_companies</th>
      <th>production_countries</th>
      <th>release_date</th>
      <th>revenue</th>
      <th>runtime</th>
      <th>spoken_languages</th>
      <th>status</th>
      <th>tagline</th>
      <th>title</th>
      <th>vote_average</th>
      <th>vote_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>237000000</td>
      <td>[{"id": 28, "name": "Action"}, {"id": 12, "nam...</td>
      <td>http://www.avatarmovie.com/</td>
      <td>19995</td>
      <td>[{"id": 1463, "name": "culture clash"}, {"id":...</td>
      <td>en</td>
      <td>Avatar</td>
      <td>In the 22nd century, a paraplegic Marine is di...</td>
      <td>150.437577</td>
      <td>[{"name": "Ingenious Film Partners", "id": 289...</td>
      <td>[{"iso_3166_1": "US", "name": "United States o...</td>
      <td>2009-12-10</td>
      <td>2787965087</td>
      <td>162.0</td>
      <td>[{"iso_639_1": "en", "name": "English"}, {"iso...</td>
      <td>Released</td>
      <td>Enter the World of Pandora.</td>
      <td>Avatar</td>
      <td>7.2</td>
      <td>11800</td>
    </tr>
    <tr>
      <th>1</th>
      <td>300000000</td>
      <td>[{"id": 12, "name": "Adventure"}, {"id": 14, "...</td>
      <td>http://disney.go.com/disneypictures/pirates/</td>
      <td>285</td>
      <td>[{"id": 270, "name": "ocean"}, {"id": 726, "na...</td>
      <td>en</td>
      <td>Pirates of the Caribbean: At World's End</td>
      <td>Captain Barbossa, long believed to be dead, ha...</td>
      <td>139.082615</td>
      <td>[{"name": "Walt Disney Pictures", "id": 2}, {"...</td>
      <td>[{"iso_3166_1": "US", "name": "United States o...</td>
      <td>2007-05-19</td>
      <td>961000000</td>
      <td>169.0</td>
      <td>[{"iso_639_1": "en", "name": "English"}]</td>
      <td>Released</td>
      <td>At the end of the world, the adventure begins.</td>
      <td>Pirates of the Caribbean: At World's End</td>
      <td>6.9</td>
      <td>4500</td>
    </tr>
    <tr>
      <th>2</th>
      <td>245000000</td>
      <td>[{"id": 28, "name": "Action"}, {"id": 12, "nam...</td>
      <td>http://www.sonypictures.com/movies/spectre/</td>
      <td>206647</td>
      <td>[{"id": 470, "name": "spy"}, {"id": 818, "name...</td>
      <td>en</td>
      <td>Spectre</td>
      <td>A cryptic message from Bond’s past sends him o...</td>
      <td>107.376788</td>
      <td>[{"name": "Columbia Pictures", "id": 5}, {"nam...</td>
      <td>[{"iso_3166_1": "GB", "name": "United Kingdom"...</td>
      <td>2015-10-26</td>
      <td>880674609</td>
      <td>148.0</td>
      <td>[{"iso_639_1": "fr", "name": "Fran\u00e7ais"},...</td>
      <td>Released</td>
      <td>A Plan No One Escapes</td>
      <td>Spectre</td>
      <td>6.3</td>
      <td>4466</td>
    </tr>
    <tr>
      <th>3</th>
      <td>250000000</td>
      <td>[{"id": 28, "name": "Action"}, {"id": 80, "nam...</td>
      <td>http://www.thedarkknightrises.com/</td>
      <td>49026</td>
      <td>[{"id": 849, "name": "dc comics"}, {"id": 853,...</td>
      <td>en</td>
      <td>The Dark Knight Rises</td>
      <td>Following the death of District Attorney Harve...</td>
      <td>112.312950</td>
      <td>[{"name": "Legendary Pictures", "id": 923}, {"...</td>
      <td>[{"iso_3166_1": "US", "name": "United States o...</td>
      <td>2012-07-16</td>
      <td>1084939099</td>
      <td>165.0</td>
      <td>[{"iso_639_1": "en", "name": "English"}]</td>
      <td>Released</td>
      <td>The Legend Ends</td>
      <td>The Dark Knight Rises</td>
      <td>7.6</td>
      <td>9106</td>
    </tr>
    <tr>
      <th>4</th>
      <td>260000000</td>
      <td>[{"id": 28, "name": "Action"}, {"id": 12, "nam...</td>
      <td>http://movies.disney.com/john-carter</td>
      <td>49529</td>
      <td>[{"id": 818, "name": "based on novel"}, {"id":...</td>
      <td>en</td>
      <td>John Carter</td>
      <td>John Carter is a war-weary, former military ca...</td>
      <td>43.926995</td>
      <td>[{"name": "Walt Disney Pictures", "id": 2}]</td>
      <td>[{"iso_3166_1": "US", "name": "United States o...</td>
      <td>2012-03-07</td>
      <td>284139100</td>
      <td>132.0</td>
      <td>[{"iso_639_1": "en", "name": "English"}]</td>
      <td>Released</td>
      <td>Lost in our world, found in another.</td>
      <td>John Carter</td>
      <td>6.1</td>
      <td>2124</td>
    </tr>
  </tbody>
</table>
</div>
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>credits<span style="color:#f92672">.</span>head()
</span></span></code></pre></div></br>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>movie_id</th>
      <th>title</th>
      <th>cast</th>
      <th>crew</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>19995</td>
      <td>Avatar</td>
      <td>[{"cast_id": 242, "character": "Jake Sully", "...</td>
      <td>[{"credit_id": "52fe48009251416c750aca23", "de...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>285</td>
      <td>Pirates of the Caribbean: At World's End</td>
      <td>[{"cast_id": 4, "character": "Captain Jack Spa...</td>
      <td>[{"credit_id": "52fe4232c3a36847f800b579", "de...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>206647</td>
      <td>Spectre</td>
      <td>[{"cast_id": 1, "character": "James Bond", "cr...</td>
      <td>[{"credit_id": "54805967c3a36829b5002c41", "de...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>49026</td>
      <td>The Dark Knight Rises</td>
      <td>[{"cast_id": 2, "character": "Bruce Wayne / Ba...</td>
      <td>[{"credit_id": "52fe4781c3a36847f81398c3", "de...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>49529</td>
      <td>John Carter</td>
      <td>[{"cast_id": 5, "character": "John Carter", "c...</td>
      <td>[{"credit_id": "52fe479ac3a36847f813eaa3", "de...</td>
    </tr>
  </tbody>
</table>
</div>
</br>
<p>As we don&rsquo;t have the knowledge about the sanctity of dataset, we need to do some primary analysis. At first we need to check that whether the primary key (id) holds it propert or not. The first five results below shows the primary key is unique and the two tables can be joined based on that.</p>
<p>Furthermore we can check that whether any of the columns has missing values or not. From the analysis, it occurs to be the case that 3091 movies out of 4803 has missing homepage, 3 has missing overview, 1 has missing release_date, 2 has missing runtime and 844 has missing tagline. All the movies have corresponding credit information for them.</p>
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Shape of movies: &#34;</span> <span style="color:#f92672">+</span> str(movies<span style="color:#f92672">.</span>shape))
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Shape of credits: &#34;</span> <span style="color:#f92672">+</span> str(credits<span style="color:#f92672">.</span>shape))
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Unique value of ids in movies: &#34;</span> <span style="color:#f92672">+</span> str(movies<span style="color:#f92672">.</span>id<span style="color:#f92672">.</span>unique()<span style="color:#f92672">.</span>size))
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Unique value of ids in credits: &#34;</span> <span style="color:#f92672">+</span> str(credits<span style="color:#f92672">.</span>movie_id<span style="color:#f92672">.</span>unique()<span style="color:#f92672">.</span>size))
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Inner join results size: &#34;</span> <span style="color:#f92672">+</span> str(pd<span style="color:#f92672">.</span>merge(movies, credits, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;movie_id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)<span style="color:#f92672">.</span>shape))
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Count of null values in each column of movies</span>
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> movies<span style="color:#f92672">.</span>isnull()<span style="color:#f92672">.</span>sum()
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> s[s <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>to_frame()
</span></span><span style="display:flex;"><span>display(s)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Count of null values in each column of credits</span>
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> credits<span style="color:#f92672">.</span>isnull()<span style="color:#f92672">.</span>sum()
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> s[s <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>to_frame()
</span></span><span style="display:flex;"><span>display(s)
</span></span></code></pre></div></br>
<pre><code>Shape of movies: (4803, 20)
Shape of credits: (4803, 4)
Unique value of ids in movies: 4803
Unique value of ids in credits: 4803
Inner join results size: (4803, 24)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>homepage</th>
      <td>3091</td>
    </tr>
    <tr>
      <th>overview</th>
      <td>3</td>
    </tr>
    <tr>
      <th>release_date</th>
      <td>1</td>
    </tr>
    <tr>
      <th>runtime</th>
      <td>2</td>
    </tr>
    <tr>
      <th>tagline</th>
      <td>844</td>
    </tr>
  </tbody>
</table>
</div>
</br>
<p>First of all, we can analyse the data based on the release_date. For this we need to transform release_date from string to datetime format and later on extract year, month and day as separate columns.</p>
<p>The first plot the distribution of count of movies and the corresponding count of movies having homepage. It can be presumed that movies having release dates prior to the widespread use of internet will not have the webpage. The plot somehow confirms the claim. It can be seen that for the movies releasaed after 2000, the percentage of movies having a webpage increases exponentially (with a deep slump in 2016!!!!).</p>
<p>Several other interesting insights can be gained by analysing Movie Run Time, Average Vote, Vote Count, Budget/Revenue and Popularity vs Year. Movie Run Time gradually decreases by year of release. Vote Count gradually increases and average vote decreases(this is interesting though!!!! Does this mean that though count of movies made increases by the year but the average quality of the movies detoriarate) by year. Average budget of movies and total revenue increase as well as we advance in time. Another interesting insight is the relationship of revenue with the release month of the movie. It is noted that movies released around May, June and around end of the year collects revenue compared to the one released in rest of the months (It seems that Monthly Box Offide Reports confirms this!!!!).</p>
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Convert release_date from string to datetime and extract year month and date values</span>
</span></span><span style="display:flex;"><span>movies[<span style="color:#e6db74">&#39;release_date&#39;</span>] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>to_datetime(movies[<span style="color:#e6db74">&#39;release_date&#39;</span>])
</span></span><span style="display:flex;"><span>movies[<span style="color:#e6db74">&#39;release_year&#39;</span>] <span style="color:#f92672">=</span> movies[<span style="color:#e6db74">&#39;release_date&#39;</span>]<span style="color:#f92672">.</span>dt<span style="color:#f92672">.</span>year
</span></span><span style="display:flex;"><span>movies[<span style="color:#e6db74">&#39;release_month&#39;</span>] <span style="color:#f92672">=</span> movies[<span style="color:#e6db74">&#39;release_date&#39;</span>]<span style="color:#f92672">.</span>dt<span style="color:#f92672">.</span>month
</span></span><span style="display:flex;"><span>movies[<span style="color:#e6db74">&#39;release_day&#39;</span>] <span style="color:#f92672">=</span> movies[<span style="color:#e6db74">&#39;release_date&#39;</span>]<span style="color:#f92672">.</span>dt<span style="color:#f92672">.</span>day
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(data <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;movie_count&#39;</span>: movies<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;release_year&#39;</span>])[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>count(),
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;movie_having_homepage&#39;</span>: movies<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;release_year&#39;</span>])[<span style="color:#e6db74">&#39;homepage&#39;</span>]<span style="color:#f92672">.</span>count(),
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;per_hvng_homepage&#39;</span>: (movies<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;release_year&#39;</span>])[<span style="color:#e6db74">&#39;homepage&#39;</span>]<span style="color:#f92672">.</span>count()<span style="color:#f92672">/</span> movies<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;release_year&#39;</span>])[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>count())<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a Figure</span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">16</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set up Axes</span>
</span></span><span style="display:flex;"><span>ax1 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">311</span>)
</span></span><span style="display:flex;"><span>ax1<span style="color:#f92672">.</span>plot(df<span style="color:#f92672">.</span>index, df[<span style="color:#e6db74">&#39;movie_count&#39;</span>] , <span style="color:#e6db74">&#39;green&#39;</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Total Count&#39;</span>)
</span></span><span style="display:flex;"><span>ax1<span style="color:#f92672">.</span>plot(df<span style="color:#f92672">.</span>index, df[<span style="color:#e6db74">&#39;movie_having_homepage&#39;</span>], <span style="color:#e6db74">&#39;red&#39;</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Movies having Webpage&#39;</span>)
</span></span><span style="display:flex;"><span>ax1<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;Year of Release&#39;</span>)
</span></span><span style="display:flex;"><span>ax1<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;Count&#39;</span>)
</span></span><span style="display:flex;"><span>ax1<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Count of Movies by year&#39;</span>)
</span></span><span style="display:flex;"><span>ax1<span style="color:#f92672">.</span>legend()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ax2 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">312</span>)
</span></span><span style="display:flex;"><span>ax2<span style="color:#f92672">.</span>plot(df<span style="color:#f92672">.</span>index, df[<span style="color:#e6db74">&#39;per_hvng_homepage&#39;</span>] , <span style="color:#e6db74">&#39;blue&#39;</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">% o</span><span style="color:#e6db74">f Movies having homepage&#39;</span>)
</span></span><span style="display:flex;"><span>ax2<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;Year of Release&#39;</span>)
</span></span><span style="display:flex;"><span>ax2<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;% Movies having Webpage&#39;</span>)
</span></span><span style="display:flex;"><span>ax2<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;</span><span style="color:#e6db74">% o</span><span style="color:#e6db74">f Movies having Webpage by year&#39;</span>)
</span></span><span style="display:flex;"><span>ax2<span style="color:#f92672">.</span>legend()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div></br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_11_0.png" alt="">
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Plot of Movie Run Time against Year (with Mean and Standard Deviation)</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>relplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;release_year&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;runtime&#34;</span>, kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;line&#34;</span>, ci<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sd&#34;</span>, data<span style="color:#f92672">=</span>movies, height<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>, aspect<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;red&#34;</span>)
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> g<span style="color:#f92672">.</span>set_axis_labels(<span style="color:#e6db74">&#34;Release Year&#34;</span>, <span style="color:#e6db74">&#34;Running Time&#34;</span>)
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">.</span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Movie Run Time vs Year&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plot of Average Vote against Year (with Mean and Standard Deviation)</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>relplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;release_year&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;vote_average&#34;</span>, kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;line&#34;</span>, ci<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sd&#34;</span>, data<span style="color:#f92672">=</span>movies, height<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>, aspect<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;green&#34;</span>)
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> g<span style="color:#f92672">.</span>set_axis_labels(<span style="color:#e6db74">&#34;Release Year&#34;</span>, <span style="color:#e6db74">&#34;Average Vote&#34;</span>)
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">.</span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Average Vote vs Year&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plot of Vote Count against Year (with Mean and Standard Deviation)</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>relplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;release_year&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;vote_count&#34;</span>, kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;line&#34;</span>, ci<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sd&#34;</span>, data<span style="color:#f92672">=</span>movies, height<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>, aspect<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;y&#34;</span>)
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> g<span style="color:#f92672">.</span>set_axis_labels(<span style="color:#e6db74">&#34;Release Year&#34;</span>, <span style="color:#e6db74">&#34;Vote Count&#34;</span>)
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">.</span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Vote Count vs Year&#39;</span>)
</span></span></code></pre></div><pre><code>Text(0.5,0.98,'Vote Count vs Year')
</code></pre>
</br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_12_1.png" alt="">
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_12_2.png" alt="">
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_12_3.png" alt="">
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Plot of mean of budget and revenue vs Year</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a Figure</span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set up Axes</span>
</span></span><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">111</span>)
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>lineplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;release_year&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;budget&#34;</span>, ci<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sd&#34;</span>, data<span style="color:#f92672">=</span>movies, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;red&#34;</span>, ax<span style="color:#f92672">=</span>ax, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Budget&#34;</span>)
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>lineplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;release_year&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;revenue&#34;</span>, ci<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sd&#34;</span>, data<span style="color:#f92672">=</span>movies, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;green&#34;</span>, ax<span style="color:#f92672">=</span>ax, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Revenue&#34;</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;Year of Release&#39;</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;Budget/Revenue&#39;</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Budget/Revenue vs Year&#39;</span>)
</span></span></code></pre></div><pre><code>Text(0.5,1,'Budget/Revenue vs Year')
</code></pre>
</br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_13_1.png" alt="">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Plot of mean of popularity vs Year</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>relplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;release_year&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;popularity&#34;</span>, kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;line&#34;</span>, ci<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sd&#34;</span>, data<span style="color:#f92672">=</span>movies, height<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>, aspect<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;b&#34;</span>)
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> g<span style="color:#f92672">.</span>set_axis_labels(<span style="color:#e6db74">&#34;Release Year&#34;</span>, <span style="color:#e6db74">&#34;Popularity&#34;</span>)
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">.</span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Popularity vs Year&#39;</span>)
</span></span></code></pre></div><pre><code>Text(0.5,0.98,'Popularity vs Year')
</code></pre>
</br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_14_1.png" alt="">
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Plot of Revenue against Month of Release (with Mean and Standard Deviation)</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>relplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;release_month&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;revenue&#34;</span>, kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;line&#34;</span>, data<span style="color:#f92672">=</span>movies, height<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>, aspect<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#FF00FF&#34;</span>)
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> g<span style="color:#f92672">.</span>set_axis_labels(<span style="color:#e6db74">&#34;Release Month&#34;</span>, <span style="color:#e6db74">&#34;Revenue&#34;</span>)
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">.</span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Revenue (with 95% CI) vs Release Month&#39;</span>)
</span></span></code></pre></div><pre><code>Text(0.5,0.98,'Revenue (with 95% CI) vs Release Month')
</code></pre>
</br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_15_1.png" alt="">
<p>We need to do further data cleaning. Five columns named : &lsquo;genres&rsquo;, &lsquo;keywords&rsquo;, &lsquo;production_companies&rsquo;, &lsquo;spoken_languages&rsquo; and &lsquo;production_countries&rsquo; are in JSON (string) format. We need to extract the corresponding values for them and assign them to the movies. From further analysis it was found that total counts of different genres, production_companies, spoken_languages and production_countries are within a certain limit and hence we can maintain a separate data frame which corrsponds individual movies to their respective values for them.</p>
<p>Total count of distinct keywords are considerable and hence they are flattened and delimited by pipe(|) and stored in place.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Convert columns with json format to dict</span>
</span></span><span style="display:flex;"><span>json_columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;genres&#39;</span>, <span style="color:#e6db74">&#39;keywords&#39;</span>, <span style="color:#e6db74">&#39;production_companies&#39;</span>, <span style="color:#e6db74">&#39;spoken_languages&#39;</span>, <span style="color:#e6db74">&#39;production_countries&#39;</span>]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> column <span style="color:#f92672">in</span> json_columns:
</span></span><span style="display:flex;"><span>        movies[column] <span style="color:#f92672">=</span> movies[column]<span style="color:#f92672">.</span>apply(json<span style="color:#f92672">.</span>loads)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Code to generate separate data frames for movie_genres, movie_prouction_companies and movie_spoken_language and</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># movie_production_countries</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Genres</span>
</span></span><span style="display:flex;"><span>dict_genres <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;genre_id&#39;</span>]
</span></span><span style="display:flex;"><span>df_movie_genres <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(columns<span style="color:#f92672">=</span>columns)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Production Companies</span>
</span></span><span style="display:flex;"><span>dict_production_companies <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;production_company_id&#39;</span>]
</span></span><span style="display:flex;"><span>df_movie_production_companies <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(columns<span style="color:#f92672">=</span>columns)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Spoken Language</span>
</span></span><span style="display:flex;"><span>dict_spoken_languages <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;language_id&#39;</span>]
</span></span><span style="display:flex;"><span>df_movie_languages <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(columns<span style="color:#f92672">=</span>columns)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># production_countries</span>
</span></span><span style="display:flex;"><span>dict_production_countries <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;production_country_id&#39;</span>]
</span></span><span style="display:flex;"><span>df_movie_production_countries <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(columns<span style="color:#f92672">=</span>columns)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> index, row <span style="color:#f92672">in</span> movies<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> d <span style="color:#f92672">in</span> row[<span style="color:#e6db74">&#39;genres&#39;</span>]:
</span></span><span style="display:flex;"><span>        dict_genres[d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;id&#39;</span>)] <span style="color:#f92672">=</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;name&#39;</span>)
</span></span><span style="display:flex;"><span>        df_movie_genres<span style="color:#f92672">.</span>loc[len(df_movie_genres)] <span style="color:#f92672">=</span> [row[<span style="color:#e6db74">&#39;id&#39;</span>], d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;id&#39;</span>)]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> d <span style="color:#f92672">in</span> row[<span style="color:#e6db74">&#39;production_companies&#39;</span>]:
</span></span><span style="display:flex;"><span>        dict_production_companies[d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;id&#39;</span>)] <span style="color:#f92672">=</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;name&#39;</span>)
</span></span><span style="display:flex;"><span>        df_movie_production_companies<span style="color:#f92672">.</span>loc[len(df_movie_production_companies)] <span style="color:#f92672">=</span> [row[<span style="color:#e6db74">&#39;id&#39;</span>], d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;id&#39;</span>)]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> d <span style="color:#f92672">in</span> row[<span style="color:#e6db74">&#39;spoken_languages&#39;</span>]:
</span></span><span style="display:flex;"><span>        dict_spoken_languages[d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;iso_639_1&#39;</span>)] <span style="color:#f92672">=</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;name&#39;</span>)
</span></span><span style="display:flex;"><span>        df_movie_languages<span style="color:#f92672">.</span>loc[len(df_movie_languages)] <span style="color:#f92672">=</span> [row[<span style="color:#e6db74">&#39;id&#39;</span>], d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;iso_639_1&#39;</span>)]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> d <span style="color:#f92672">in</span> row[<span style="color:#e6db74">&#39;production_countries&#39;</span>]:
</span></span><span style="display:flex;"><span>        dict_production_countries[d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;iso_3166_1&#39;</span>)] <span style="color:#f92672">=</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;name&#39;</span>)
</span></span><span style="display:flex;"><span>        df_movie_production_countries<span style="color:#f92672">.</span>loc[len(df_movie_production_countries)] <span style="color:#f92672">=</span> [row[<span style="color:#e6db74">&#39;id&#39;</span>], d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;iso_3166_1&#39;</span>)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_genres <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(list(dict_genres<span style="color:#f92672">.</span>items()), columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>]);
</span></span><span style="display:flex;"><span>df_production_companies <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(list(dict_production_companies<span style="color:#f92672">.</span>items()), columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>]);
</span></span><span style="display:flex;"><span>df_spoken_languages <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(list(dict_spoken_languages<span style="color:#f92672">.</span>items()), columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>]);
</span></span><span style="display:flex;"><span>df_production_countries <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(list(dict_production_countries<span style="color:#f92672">.</span>items()), columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>]);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Flatten keywords (separated by pipe)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">flatten_keywords</span>(keyword):
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> keyword:
</span></span><span style="display:flex;"><span>        result <span style="color:#f92672">+=</span> ((x<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;name&#39;</span>)) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;|&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> result
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>movies[<span style="color:#e6db74">&#39;keywords&#39;</span>] <span style="color:#f92672">=</span> movies[<span style="color:#e6db74">&#39;keywords&#39;</span>]<span style="color:#f92672">.</span>apply(flatten_keywords)
</span></span></code></pre></div></br>
The dataset can be analysed based on Genre, Language and Production House as well. The pie chart based on Genres and Movie Language is shown below. Drama, Comdy, Thriller and Action are the top 4 movie genres by count. The dataset has the highest number of movies in English followed by French and Spanish. Top 3 production houses based on movie count are: Warner Bros., Universal Pictures and Paramount Pictures.
<p>Historical and War movies have the highest average rating followed by Drama and Musical movies. Warner Bros., Universal Pictures and Paramount Pictures are the top production houses based on average rating as well.</p>
</br>
```python
# Movies by genre
s = df_movie_genres.groupby(['genre_id'])['id'].count()
df = pd.DataFrame({'genre_id':s.index, 'count':s.values})
df = pd.merge(df, df_genres, left_on='genre_id', right_on='id', how='inner').drop(['genre_id', 'id'], axis=1)
df.iplot(kind='pie',labels='name',values='count', colorscale='YlOrRd', title='Movies by Genres')
```
</br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/12.png" alt="">
</br>
```python
# Movies by language (at least 100 movies for individual languages)
s = df_movie_languages.groupby(['language_id'])['id'].count()
df = pd.DataFrame({'language_id':s.index, 'count':s.values})
df = df[df['count'] >= 100]
df.head(100)
df = pd.merge(df, df_spoken_languages, left_on='language_id', right_on='id', how='inner').drop(['language_id', 'id'], axis=1)
df.iplot(kind='pie',labels='name',values='count', colorscale='YlOrRd', title='Movies by Language(at least 100)')
```
</br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/13.png" alt="">
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Movies by production house (at least 50 movies by the production house)</span>
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> df_movie_production_companies<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;production_company_id&#39;</span>])[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>count()
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;production_company_id&#39;</span>:s<span style="color:#f92672">.</span>index, <span style="color:#e6db74">&#39;count&#39;</span>:s<span style="color:#f92672">.</span>values})
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">50</span>]
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, df_production_companies, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;production_company_id&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;production_company_id&#39;</span>, <span style="color:#e6db74">&#39;id&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>iplot(kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pie&#39;</span>,labels<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;name&#39;</span>,values<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;count&#39;</span>, colorscale<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;YlOrRd&#39;</span>, title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Movies by Production House(at least 50)&#39;</span>)
</span></span></code></pre></div></br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/14.png" alt="">
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Average Rating by Genre</span>
</span></span><span style="display:flex;"><span>df_movie_genres[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">=</span> df_movie_genres[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>astype(int)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df_movie_genres, movies, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)[[<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;genre_id&#39;</span>, <span style="color:#e6db74">&#39;vote_average&#39;</span>]]
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;genre_id&#39;</span>])[<span style="color:#e6db74">&#39;vote_average&#39;</span>]<span style="color:#f92672">.</span>mean()
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;genre_id&#39;</span>:s<span style="color:#f92672">.</span>index, <span style="color:#e6db74">&#39;average_vote&#39;</span>:s<span style="color:#f92672">.</span>values})
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, df_genres, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;genre_id&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;genre_id&#39;</span>, <span style="color:#e6db74">&#39;id&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plot bargraph</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># create trace</span>
</span></span><span style="display:flex;"><span>trace <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Bar(
</span></span><span style="display:flex;"><span>                x <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;name&#39;</span>],
</span></span><span style="display:flex;"><span>                y <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;average_vote&#39;</span>],
</span></span><span style="display:flex;"><span>                marker <span style="color:#f92672">=</span> dict(color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;#D2B4DE&#39;</span>,
</span></span><span style="display:flex;"><span>                             line<span style="color:#f92672">=</span>dict(color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;rgb(0,0,0)&#39;</span>,width<span style="color:#f92672">=</span><span style="color:#ae81ff">1.5</span>)),
</span></span><span style="display:flex;"><span>                text <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;name&#39;</span>])
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> [trace]
</span></span><span style="display:flex;"><span>layout <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Layout(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Average Rating by Genre&#39;</span>,
</span></span><span style="display:flex;"><span>    yaxis<span style="color:#f92672">=</span>dict(
</span></span><span style="display:flex;"><span>        title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Rating&#39;</span>,
</span></span><span style="display:flex;"><span>        range<span style="color:#f92672">=</span>[<span style="color:#ae81ff">5.5</span>, <span style="color:#ae81ff">7</span>]
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    xaxis<span style="color:#f92672">=</span>dict(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Genre&#39;</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Figure(data <span style="color:#f92672">=</span> data, layout <span style="color:#f92672">=</span> layout)
</span></span><span style="display:flex;"><span>plotly<span style="color:#f92672">.</span>offline<span style="color:#f92672">.</span>iplot(fig)
</span></span></code></pre></div></br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/15.png" alt="">
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Average Rating by Production House</span>
</span></span><span style="display:flex;"><span>df_movie_production_companies[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">=</span> df_movie_production_companies[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>astype(int)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df_movie_production_companies, movies, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)[[<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;production_company_id&#39;</span>, <span style="color:#e6db74">&#39;vote_average&#39;</span>]]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;production_company_id&#39;</span>])<span style="color:#f92672">.</span>agg({<span style="color:#e6db74">&#39;vote_average&#39;</span>: <span style="color:#e6db74">&#39;mean&#39;</span>, <span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#e6db74">&#39;count&#39;</span>})
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;production_company_id&#39;</span>] <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>index
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;vote_average&#39;</span>, <span style="color:#e6db74">&#39;count&#39;</span>, <span style="color:#e6db74">&#39;production_company_id&#39;</span>]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">200</span>]
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;count&#39;</span>]<span style="color:#f92672">/</span><span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, df_production_companies, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;production_company_id&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)[[<span style="color:#e6db74">&#39;vote_average&#39;</span>, <span style="color:#e6db74">&#39;count&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plot bargraph</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># create trace</span>
</span></span><span style="display:flex;"><span>trace1 <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Bar(
</span></span><span style="display:flex;"><span>                x <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;name&#39;</span>],
</span></span><span style="display:flex;"><span>                y <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;vote_average&#39;</span>],
</span></span><span style="display:flex;"><span>                name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Average Rating&#34;</span>,
</span></span><span style="display:flex;"><span>                marker <span style="color:#f92672">=</span> dict(color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;rgba(255, 174, 255, 0.5)&#39;</span>,
</span></span><span style="display:flex;"><span>                             line<span style="color:#f92672">=</span>dict(color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;rgb(0,0,0)&#39;</span>,width<span style="color:#f92672">=</span><span style="color:#ae81ff">1.5</span>)),
</span></span><span style="display:flex;"><span>                text <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;name&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>trace2 <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Bar(
</span></span><span style="display:flex;"><span>                x <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;name&#39;</span>],
</span></span><span style="display:flex;"><span>                y <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;count&#39;</span>],
</span></span><span style="display:flex;"><span>                name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Movie Count&#34;</span>,
</span></span><span style="display:flex;"><span>                marker <span style="color:#f92672">=</span> dict(color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;rgba(255, 255, 128, 0.5)&#39;</span>,
</span></span><span style="display:flex;"><span>                              line<span style="color:#f92672">=</span>dict(color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;rgb(0,0,0)&#39;</span>,width<span style="color:#f92672">=</span><span style="color:#ae81ff">1.5</span>)),
</span></span><span style="display:flex;"><span>                text <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;name&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> [trace1, trace2]
</span></span><span style="display:flex;"><span>layout <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Layout(
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Average Rating and Count by Production House (Movies Produced &gt; 200)&#39;</span>,
</span></span><span style="display:flex;"><span>    yaxis<span style="color:#f92672">=</span>dict(
</span></span><span style="display:flex;"><span>        range<span style="color:#f92672">=</span>[<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">7</span>],
</span></span><span style="display:flex;"><span>        title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Average Rating/ Count = (Value*50)&#39;</span>
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    xaxis<span style="color:#f92672">=</span>dict(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Production House&#39;</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Figure(data <span style="color:#f92672">=</span> data, layout <span style="color:#f92672">=</span> layout)
</span></span><span style="display:flex;"><span>plotly<span style="color:#f92672">.</span>offline<span style="color:#f92672">.</span>iplot(fig)
</span></span></code></pre></div></br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/16.png" alt="">
</br>
<p>The cast and crew data can be extracted and assigned to the movies for further analysis. As the data is in the form of JSON (represented in string format), we need to extract them and assign them to corresponding movies. Top 5 casts (based on order of appearance in credits) is extracted and assigned to the movie. For the crew, Director, Producer and Screenplay Writer is extracted.</p>
<p>A wordcloud plot of top 50 casts (based on appearance) is shown. It is dominted by Robert De Niro, Samuel L. Jackson, Morgan Freeman, Bruce Willis and Matt Damon. Lionardo DiCaprio, Christian Bale, Tom Hanks and Brad Pitt are the top actors who appeared in the top rated movies (with a minimum of 20 movies count).</p>
<p>For the crew: Steven Spielberg, Joel Silver, Scott Rudin, Tim Beven and Eric Fellner are the top Director/Producers based on movie count. Christopher Nolan, Peter Jackson, Mrtin Scorsese, Francis Ford Coppola and Richard Linklater dominates when it comes about the top rated movies (based on minimum movie count of 20).</p>
<p>A separate analysis is done for female casts. Nicole Kidman, Julia Roberts and Cameron Diaz have the highest count of movies under their name in the list. The highest rated movies are dominated by Kate Winslet, Cate Blanchett, Scarlet Johansson and Anne Hathaway.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Convert columns with json format to dict</span>
</span></span><span style="display:flex;"><span>json_columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;cast&#39;</span>, <span style="color:#e6db74">&#39;crew&#39;</span>]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> column <span style="color:#f92672">in</span> json_columns:
</span></span><span style="display:flex;"><span>        credits[column] <span style="color:#f92672">=</span> credits[column]<span style="color:#f92672">.</span>apply(json<span style="color:#f92672">.</span>loads)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;character&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;gender&#39;</span>, <span style="color:#e6db74">&#39;order&#39;</span>]
</span></span><span style="display:flex;"><span>df_movie_cast <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(columns<span style="color:#f92672">=</span>columns)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> index, row <span style="color:#f92672">in</span> credits<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> d <span style="color:#f92672">in</span> row[<span style="color:#e6db74">&#39;cast&#39;</span>]:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;order&#39;</span>) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">5</span>):
</span></span><span style="display:flex;"><span>            df_movie_cast<span style="color:#f92672">.</span>loc[len(df_movie_cast)] <span style="color:#f92672">=</span> [row[<span style="color:#e6db74">&#39;movie_id&#39;</span>], d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;character&#39;</span>), d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;name&#39;</span>), d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;gender&#39;</span>), d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;order&#39;</span>)]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;job&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;gender&#39;</span>]
</span></span><span style="display:flex;"><span>df_movie_crew <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(columns<span style="color:#f92672">=</span>columns)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Extract Director, Producer and Screenplay from crew</span>
</span></span><span style="display:flex;"><span>keyValList <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;Director&#39;</span>,<span style="color:#e6db74">&#39;Producer&#39;</span>, <span style="color:#e6db74">&#39;Screenplay&#39;</span>]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> index, row <span style="color:#f92672">in</span> credits<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>    temp <span style="color:#f92672">=</span> [d <span style="color:#66d9ef">for</span> d <span style="color:#f92672">in</span> row[<span style="color:#e6db74">&#39;crew&#39;</span>] <span style="color:#66d9ef">if</span> d[<span style="color:#e6db74">&#39;job&#39;</span>] <span style="color:#f92672">in</span> keyValList]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> d <span style="color:#f92672">in</span> temp:
</span></span><span style="display:flex;"><span>        df_movie_crew<span style="color:#f92672">.</span>loc[len(df_movie_crew)] <span style="color:#f92672">=</span> [row[<span style="color:#e6db74">&#39;movie_id&#39;</span>], d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;job&#39;</span>), d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;name&#39;</span>), d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;gender&#39;</span>)]            
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># WordCloud for Top 50 casts (based on appearance)</span>
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> df_movie_cast<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;name&#39;</span>])[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>count()<span style="color:#f92672">.</span>to_frame()<span style="color:#f92672">.</span>to_dict()<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;id&#39;</span>)
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Movie Casts (based on appearance)&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#1ABC9C&#39;</span>)
</span></span><span style="display:flex;"><span>wc <span style="color:#f92672">=</span> WordCloud(width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, background_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>, max_words<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># generate word cloud</span>
</span></span><span style="display:flex;"><span>wc<span style="color:#f92672">.</span>generate_from_frequencies(text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># show</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(wc, interpolation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bilinear&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>axis(<span style="color:#e6db74">&#34;off&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WordCloud for Top 50 casts (based on average rating)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Average Rating by Movie Cast</span>
</span></span><span style="display:flex;"><span>df_movie_cast[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">=</span> df_movie_cast[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>astype(int)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df_movie_cast, movies, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)[[<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;vote_average&#39;</span>]]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;name&#39;</span>])<span style="color:#f92672">.</span>agg({<span style="color:#e6db74">&#39;vote_average&#39;</span>: <span style="color:#e6db74">&#39;mean&#39;</span>, <span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#e6db74">&#39;count&#39;</span>})
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;name&#39;</span>] <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>index
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;vote_average&#39;</span>, <span style="color:#e6db74">&#39;count&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">20</span>]
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;vote_average&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;vote_average&#39;</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> df[[<span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;vote_average&#39;</span>]]<span style="color:#f92672">.</span>to_dict()<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;vote_average&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Movie Casts (based on rating and minimum movie count &gt;= 20)&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#1ABC9C&#39;</span>)
</span></span><span style="display:flex;"><span>wc <span style="color:#f92672">=</span> WordCloud(width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, background_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>, max_words<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># generate word cloud</span>
</span></span><span style="display:flex;"><span>wc<span style="color:#f92672">.</span>generate_from_frequencies(text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># show</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(wc, interpolation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bilinear&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>axis(<span style="color:#e6db74">&#34;off&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div></br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_30_0.png" alt="">
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_30_1.png" alt="">
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># WordCloud for Top 50 crew members (based on appearance)</span>
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> df_movie_crew<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;name&#39;</span>])[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>count()<span style="color:#f92672">.</span>to_frame()<span style="color:#f92672">.</span>to_dict()<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;id&#39;</span>)
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Movie Crew (based on movie count)&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#1ABC9C&#39;</span>)
</span></span><span style="display:flex;"><span>wc <span style="color:#f92672">=</span> WordCloud(width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, background_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>, max_words<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># generate word cloud</span>
</span></span><span style="display:flex;"><span>wc<span style="color:#f92672">.</span>generate_from_frequencies(text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># show</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(wc, interpolation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bilinear&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>axis(<span style="color:#e6db74">&#34;off&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WordCloud for Top 50 Crew member (based on average rating)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Average Rating by Movie Crew</span>
</span></span><span style="display:flex;"><span>df_movie_crew[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">=</span> df_movie_crew[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>astype(int)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df_movie_crew, movies, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)[[<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;vote_average&#39;</span>]]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;name&#39;</span>])<span style="color:#f92672">.</span>agg({<span style="color:#e6db74">&#39;vote_average&#39;</span>: <span style="color:#e6db74">&#39;mean&#39;</span>, <span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#e6db74">&#39;count&#39;</span>})
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;name&#39;</span>] <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>index
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;vote_average&#39;</span>, <span style="color:#e6db74">&#39;count&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">20</span>]
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;vote_average&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;vote_average&#39;</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> df[[<span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;vote_average&#39;</span>]]<span style="color:#f92672">.</span>to_dict()<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;vote_average&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Movie Crew (based on rating and minimum movie count &gt;= 20)&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#1ABC9C&#39;</span>)
</span></span><span style="display:flex;"><span>wc <span style="color:#f92672">=</span> WordCloud(width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, background_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>, max_words<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># generate word cloud</span>
</span></span><span style="display:flex;"><span>wc<span style="color:#f92672">.</span>generate_from_frequencies(text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># show</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(wc, interpolation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bilinear&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>axis(<span style="color:#e6db74">&#34;off&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div></br>
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_31_0.png" alt="">
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_31_1.png" alt="">
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># WordCloud for Top 50 Female casts (based on appearance)</span>
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> df_movie_cast[df_movie_cast[<span style="color:#e6db74">&#39;gender&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;name&#39;</span>])[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>count()<span style="color:#f92672">.</span>to_frame()<span style="color:#f92672">.</span>to_dict()<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;id&#39;</span>)
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Movie Casts: Female (based on appearance)&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#1ABC9C&#39;</span>)
</span></span><span style="display:flex;"><span>wc <span style="color:#f92672">=</span> WordCloud(width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, background_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>, max_words<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># generate word cloud</span>
</span></span><span style="display:flex;"><span>wc<span style="color:#f92672">.</span>generate_from_frequencies(text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># show</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(wc, interpolation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bilinear&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>axis(<span style="color:#e6db74">&#34;off&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WordCloud for Top 50 Female casts (based on average rating)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Average Rating by Movie Cast</span>
</span></span><span style="display:flex;"><span>df_movie_cast[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">=</span> df_movie_cast[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>astype(int)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df_movie_cast[df_movie_cast[<span style="color:#e6db74">&#39;gender&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>], movies, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)[[<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;vote_average&#39;</span>]]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;name&#39;</span>])<span style="color:#f92672">.</span>agg({<span style="color:#e6db74">&#39;vote_average&#39;</span>: <span style="color:#e6db74">&#39;mean&#39;</span>, <span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#e6db74">&#39;count&#39;</span>})
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;name&#39;</span>] <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>index
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;vote_average&#39;</span>, <span style="color:#e6db74">&#39;count&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">20</span>]
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;vote_average&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;vote_average&#39;</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> df[[<span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;vote_average&#39;</span>]]<span style="color:#f92672">.</span>to_dict()<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;vote_average&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Movie Casts: Female (based on rating and minimum movie count &gt;= 20)&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#1ABC9C&#39;</span>)
</span></span><span style="display:flex;"><span>wc <span style="color:#f92672">=</span> WordCloud(width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, background_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>, max_words<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># generate word cloud</span>
</span></span><span style="display:flex;"><span>wc<span style="color:#f92672">.</span>generate_from_frequencies(text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># show</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(wc, interpolation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bilinear&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>axis(<span style="color:#e6db74">&#34;off&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_32_0.png" alt="">
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_32_1.png" alt="">
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>frequencyDict <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getFrequencyDictForKeywords</span>(keywords):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># making dict for counting frequencies</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> text <span style="color:#f92672">in</span> keywords<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34;|&#34;</span>):
</span></span><span style="display:flex;"><span>        text <span style="color:#f92672">=</span> text<span style="color:#f92672">.</span>strip()
</span></span><span style="display:flex;"><span>        val <span style="color:#f92672">=</span> frequencyDict<span style="color:#f92672">.</span>get(text, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        frequencyDict[text<span style="color:#f92672">.</span>lower()] <span style="color:#f92672">=</span> val <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>movies[<span style="color:#e6db74">&#39;keywords&#39;</span>]<span style="color:#f92672">.</span>apply(getFrequencyDictForKeywords)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Keywords (Top 20)&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#1ABC9C&#39;</span>)
</span></span><span style="display:flex;"><span>wc <span style="color:#f92672">=</span> WordCloud(width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, background_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>, max_words<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># generate word cloud</span>
</span></span><span style="display:flex;"><span>wc<span style="color:#f92672">.</span>generate_from_frequencies(frequencyDict)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># show</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(wc, interpolation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bilinear&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>axis(<span style="color:#e6db74">&#34;off&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_33_0.png" alt="">
</br>
<h3 id="recommender-system">Recommender System</h3>
<p>Recommender Systems be designed in two ways: through <b>Collaborative Filtering</b> or through <b>Content-based Filtering</b>. For the implementation by collaborative filtering, user&rsquo;s past behaviour as well as the previous decisions made by other users need to be known. Content-based Filtering approach uses the characteristics of items to derive the recommendations. Content-based Filtering system is limited in scope as it only depends on the original seed (the item whose similar item is to be recommended).</p>
<p>Collaborative filtering is based on the assumption that people who agreed in the past will agree in the future, and that they will like similar kinds of items as they liked in the past. It mainly suffers from three problems: <b>Cold-start</b> (as it requires a large ampount of user information to make accurate recommendations), <b>Scalability</b> (there can be million of users and products and hence a large amount of computational power is needed) and <b>Sparsity</b> (due to huge difference between number of items used and rated).</p>
<p>Content-based recommender system mainly rely on the features of the items and compare them for the recommendation. To abstract the features of the items in the system, an item presentation algorithm is applied. A widely used algorithm is the <b>tf–idf representation (also called vector space representation)</b>. To furtehr enhance the performance of the recommender system, a user profile can be created and used. Content-based user profile can be created by using the weighted vector of item features. Weights denote the importance of each feature to the user and can be computed from the interaction of user with the recommender system (the items that user has rated). A simple approach is to use the average values of the rated item vector. Other sophisticated machine learning techniques can be used as well.</p>
<p>Recommender Systems can be designed using various techniques. Hybrid of Collaborative and Content-based methods can be used. Various Hybridization techniques are: Weighted, Switching, Mixed and Cascade etc. The prime concern of the design of recommender system is accuracy but certain other factors are also important. <b>Diversity</b> is an important factor for the recommender system. Users tend to be more satisfied with recommendations when there is a higher intra-list diversity, e.g. items from different artists. <b>Serendipity</b> is the measure of how surprising the recommendations are. Though, a higher Serendipity score results in lower accuracy.</p>
<p>For the dataset, as user data is unavailable, we need to explore the various techniques for the implementation of Content-based Recommender System.</p>
<p>First of all we need to extract features for the implementation. <b>Keywords</b> can serve as an important feature. <b>TFIDF (term frequency–inverse document frequency)</b> can be used for finding the importance of a keyword. The number of times a term occurs in a document is called <b>term-frequency</b>. The weight of a term that occurs in a document is proportional to the term frequency. There can be certain terms that occur more frequently in documents and hence can decrease the weight of the terms that occur rarely. <b>Inverse Document Frequency</b>, which takes into account the number of documents in which the term appears, quantifies the Specificity of rarely occurring terms.</p>
<p>Simple implementation of TFIDF is as follows:</p>
<p>\begin{equation}
tf(t, d) = \dfrac{f_t}{number\ of\ words\ in\ d}
\end{equation}</p>
<p>\begin{equation}
idf(t, D) = \dfrac{N}{number\ of\ documents\ in\ which\ t\ appears}
\end{equation}</p>
<p>\begin{equation}
tfidf(t, d, D) = tf(t, d) . idf(t, D)
\end{equation}</p>
<p>\begin{equation}
tf(t, d) = \dfrac{f_t}{number\ of\ words\ in\ d}
\end{equation}</p>
<p>\begin{equation}
idf(t, D) = \dfrac{N}{number\ of\ documents\ in\ which\ t\ appears}
\end{equation}</p>
<p>\begin{equation}
tfidf(t, d, D) = tf(t, d) . idf(t, D)
\end{equation}</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.feature_extraction.text <span style="color:#f92672">import</span> TfidfVectorizer
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Preprocess keywords</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">preProcessKeywords</span>(keyword):
</span></span><span style="display:flex;"><span>    keyword <span style="color:#f92672">=</span> keyword<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34; &#34;</span>, <span style="color:#e6db74">&#34;_&#34;</span>)
</span></span><span style="display:flex;"><span>    keyword <span style="color:#f92672">=</span> keyword<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;|&#34;</span>, <span style="color:#e6db74">&#34; &#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> keyword
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>movies[<span style="color:#e6db74">&#39;keywords&#39;</span>] <span style="color:#f92672">=</span> movies[<span style="color:#e6db74">&#39;keywords&#39;</span>]<span style="color:#f92672">.</span>apply(preProcessKeywords)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>v <span style="color:#f92672">=</span> TfidfVectorizer()
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> v<span style="color:#f92672">.</span>fit_transform(movies[<span style="color:#e6db74">&#39;keywords&#39;</span>])
</span></span><span style="display:flex;"><span>keywords <span style="color:#f92672">=</span> v<span style="color:#f92672">.</span>get_feature_names()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">postProcessKeywords</span>(keyword):
</span></span><span style="display:flex;"><span>    keyword <span style="color:#f92672">=</span> keyword<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;_&#34;</span>, <span style="color:#e6db74">&#34; &#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> keyword<span style="color:#f92672">.</span>strip()
</span></span><span style="display:flex;"><span>keywords <span style="color:#f92672">=</span> list(map(postProcessKeywords, keywords))
</span></span></code></pre></div></br>
<p>Above code implements TFIDF for the keywords. A list of keywords with their corresponding score for each movie is saved which will be further used. From the movie cast, top 5 casts (in their order of appearance) are extracted and added as columns to the dataframe. A column for each genre is added as well and filled with 1 or 0 based on whether the movie belongs to the particular genre or not. From the crew info, Director is extracted and a column with name director contains the entry.</p>
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Extract top 5 cast as columns</span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> movies<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>df_movie_cast <span style="color:#f92672">=</span>  df_movie_cast[<span style="color:#f92672">~</span>df_movie_cast<span style="color:#f92672">.</span>duplicated([<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;order&#39;</span>], keep<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;first&#39;</span>)]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, df_movie_cast[df_movie_cast[<span style="color:#e6db74">&#39;order&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>], on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;character&#39;</span>, <span style="color:#e6db74">&#39;gender&#39;</span>, <span style="color:#e6db74">&#39;order&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;actor_0&#39;</span>})
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, df_movie_cast[df_movie_cast[<span style="color:#e6db74">&#39;order&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>], on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;character&#39;</span>, <span style="color:#e6db74">&#39;gender&#39;</span>, <span style="color:#e6db74">&#39;order&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;actor_1&#39;</span>})
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, df_movie_cast[df_movie_cast[<span style="color:#e6db74">&#39;order&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>], on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;character&#39;</span>, <span style="color:#e6db74">&#39;gender&#39;</span>, <span style="color:#e6db74">&#39;order&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;actor_2&#39;</span>})
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, df_movie_cast[df_movie_cast[<span style="color:#e6db74">&#39;order&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>], on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;character&#39;</span>, <span style="color:#e6db74">&#39;gender&#39;</span>, <span style="color:#e6db74">&#39;order&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;actor_3&#39;</span>})
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, df_movie_cast[df_movie_cast[<span style="color:#e6db74">&#39;order&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">4</span>], on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;character&#39;</span>, <span style="color:#e6db74">&#39;gender&#39;</span>, <span style="color:#e6db74">&#39;order&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;actor_4&#39;</span>})
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Make all the genres columns and popualate them with vlues 0 and 1 for corresponding movies</span>
</span></span><span style="display:flex;"><span>df_movie_genres[<span style="color:#e6db74">&#39;genre_id&#39;</span>] <span style="color:#f92672">=</span> df_movie_genres[<span style="color:#e6db74">&#39;genre_id&#39;</span>]<span style="color:#f92672">.</span>astype(int)
</span></span><span style="display:flex;"><span>temp <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df_movie_genres, df_genres, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;genre_id&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>)<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;id_y&#39;</span>, <span style="color:#e6db74">&#39;genre_id&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;id_x&#39;</span>:<span style="color:#e6db74">&#39;id&#39;</span>})
</span></span><span style="display:flex;"><span>temp[<span style="color:#e6db74">&#39;temp&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>temp <span style="color:#f92672">=</span> temp<span style="color:#f92672">.</span>pivot(index<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, columns<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;name&#39;</span>, values<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;temp&#39;</span>)
</span></span><span style="display:flex;"><span>temp <span style="color:#f92672">=</span> temp<span style="color:#f92672">.</span>fillna(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>temp[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">=</span> temp<span style="color:#f92672">.</span>index
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, temp, on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Fill missing values for genre columns with 0 and convert them to int</span>
</span></span><span style="display:flex;"><span>l <span style="color:#f92672">=</span> df_genres[<span style="color:#e6db74">&#39;name&#39;</span>]<span style="color:#f92672">.</span>tolist()
</span></span><span style="display:flex;"><span>df[l] <span style="color:#f92672">=</span> df[l]<span style="color:#f92672">.</span>fillna(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>df[l] <span style="color:#f92672">=</span> df[l]<span style="color:#f92672">.</span>astype(int)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Extract Director and make it as column</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Need to take only one value as certain movies has more than one directors</span>
</span></span><span style="display:flex;"><span>df_movie_crew <span style="color:#f92672">=</span>  df_movie_crew[<span style="color:#f92672">~</span>df_movie_crew<span style="color:#f92672">.</span>duplicated([<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;job&#39;</span>], keep<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;first&#39;</span>)]
</span></span><span style="display:flex;"><span>df_movie_crew[df_movie_crew[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, df_movie_crew[df_movie_crew[<span style="color:#e6db74">&#39;job&#39;</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Director&#39;</span>], on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;job&#39;</span>, <span style="color:#e6db74">&#39;gender&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;Director&#39;</span>})
</span></span></code></pre></div></br>
<p>Movies are clustered (200 clusters) based on the TFIDF scores of keywords. Though almost 75% of the movies fall in the same cluster, but for the clusters that have lower number of movies, the recommendation based on the clustering works well. For example, the movies that are assigned to cluster number 15 (shown below) are bollywood movies and recommending them together should be the preference. The idea is to use this information while building the recommendation engine. As count of movies in a cluster affects the accuracy of recommendation based on keyword clustering, each cluster is assigned a weight which is equal to (Total Movie Count - Movie in the Cluster) / (Total Movie Count) or It would be more appropriate to assign a weight of 0 to the cluster with the heighest movie count and 1 to the rest of the clusters.</p>
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Make a dataframe of keywords and their TFIDF scores and later on cluster the movies based on keyword</span>
</span></span><span style="display:flex;"><span>keys <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(data<span style="color:#f92672">=</span>x<span style="color:#f92672">.</span>todense(), columns<span style="color:#f92672">=</span>keywords)
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.cluster <span style="color:#f92672">import</span> KMeans
</span></span><span style="display:flex;"><span>km <span style="color:#f92672">=</span> KMeans(n_clusters<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>, init<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;k-means++&#39;</span>, max_iter<span style="color:#f92672">=</span><span style="color:#ae81ff">500</span>, n_init<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>km<span style="color:#f92672">.</span>fit(keys)
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;keyword_cluster&#39;</span>] <span style="color:#f92672">=</span> km<span style="color:#f92672">.</span>labels_
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df[df[<span style="color:#e6db74">&#39;keyword_cluster&#39;</span>]<span style="color:#f92672">.</span>isin([<span style="color:#ae81ff">15</span>])]
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>budget</th>
      <th>genres</th>
      <th>homepage</th>
      <th>id</th>
      <th>keywords</th>
      <th>original_language</th>
      <th>original_title</th>
      <th>overview</th>
      <th>popularity</th>
      <th>production_companies</th>
      <th>...</th>
      <th>Music</th>
      <th>Mystery</th>
      <th>Romance</th>
      <th>Science Fiction</th>
      <th>TV Movie</th>
      <th>Thriller</th>
      <th>War</th>
      <th>Western</th>
      <th>Director</th>
      <th>keyword_cluster</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>483</th>
      <td>80000000</td>
      <td>[{'id': 28, 'name': 'Action'}, {'id': 12, 'nam...</td>
      <td>NaN</td>
      <td>9562</td>
      <td>professor time_travel quantum_mechanics hundre...</td>
      <td>en</td>
      <td>Timeline</td>
      <td>A group of archaeological students become trap...</td>
      <td>11.22268</td>
      <td>[{'name': 'Paramount Pictures', 'id': 4}, {'na...</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Richard Donner</td>
      <td>15</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 50 columns</p>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>s <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby(df[<span style="color:#e6db74">&#39;keyword_cluster&#39;</span>])[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>count()
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;The cluster number with assigned weight 0 is : &#34;</span> <span style="color:#f92672">+</span> str(s<span style="color:#f92672">.</span>idxmax(axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)))
</span></span></code></pre></div><pre><code>The cluster number with assigned weight 0 is : 1
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Helper Fucnctions to plot graphs and tables</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">showResultsInTabularForm</span>(test_data, result):
</span></span><span style="display:flex;"><span>    columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;title&#39;</span>, <span style="color:#e6db74">&#39;Director&#39;</span>, <span style="color:#e6db74">&#39;Cast&#39;</span>, <span style="color:#e6db74">&#39;total_score&#39;</span>, <span style="color:#e6db74">&#39;vote_average&#39;</span>, <span style="color:#e6db74">&#39;popularity&#39;</span>]
</span></span><span style="display:flex;"><span>    cast <span style="color:#f92672">=</span> result[<span style="color:#e6db74">&#39;actor_0&#39;</span>] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#f92672">+</span> result[<span style="color:#e6db74">&#39;actor_1&#39;</span>] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#f92672">+</span> result[<span style="color:#e6db74">&#39;actor_2&#39;</span>] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#f92672">+</span> result[<span style="color:#e6db74">&#39;actor_3&#39;</span>] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#f92672">+</span> result[<span style="color:#e6db74">&#39;actor_4&#39;</span>]
</span></span><span style="display:flex;"><span>    layout <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Layout(
</span></span><span style="display:flex;"><span>        title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Suggestions for: &#39;</span> <span style="color:#f92672">+</span> test_data[<span style="color:#e6db74">&#39;title&#39;</span>])
</span></span><span style="display:flex;"><span>    trace <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Table(
</span></span><span style="display:flex;"><span>    columnwidth <span style="color:#f92672">=</span> [<span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">80</span>, <span style="color:#ae81ff">80</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">40</span>],
</span></span><span style="display:flex;"><span>    header<span style="color:#f92672">=</span>dict(values<span style="color:#f92672">=</span>columns,
</span></span><span style="display:flex;"><span>                fill <span style="color:#f92672">=</span> dict(color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#C2D4FF&#39;</span>),
</span></span><span style="display:flex;"><span>                align <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;center&#39;</span>]),
</span></span><span style="display:flex;"><span>    cells<span style="color:#f92672">=</span>dict(values<span style="color:#f92672">=</span>[result[<span style="color:#e6db74">&#39;id&#39;</span>], result[<span style="color:#e6db74">&#39;title&#39;</span>], result[<span style="color:#e6db74">&#39;Director&#39;</span>], cast ,
</span></span><span style="display:flex;"><span>                       result[<span style="color:#e6db74">&#39;total_score&#39;</span>], result[<span style="color:#e6db74">&#39;vote_average&#39;</span>], result[<span style="color:#e6db74">&#39;popularity&#39;</span>]],
</span></span><span style="display:flex;"><span>               fill <span style="color:#f92672">=</span> dict(color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#F5F8FF&#39;</span>),
</span></span><span style="display:flex;"><span>               align <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;center&#39;</span>]))
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> [trace]
</span></span><span style="display:flex;"><span>    fig <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Figure(data<span style="color:#f92672">=</span>data, layout<span style="color:#f92672">=</span>layout)
</span></span><span style="display:flex;"><span>    plotly<span style="color:#f92672">.</span>offline<span style="color:#f92672">.</span>iplot(fig, filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;pandas_table&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> networkx <span style="color:#66d9ef">as</span> nx
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">showResultsInGraphicalForm</span>(test_data, result):
</span></span><span style="display:flex;"><span>    fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">16</span>))
</span></span><span style="display:flex;"><span>    fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Suggestions for: &#39;</span> <span style="color:#f92672">+</span> test_data[<span style="color:#e6db74">&#39;title&#39;</span>], fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">30</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#99A3A4&#39;</span>)
</span></span><span style="display:flex;"><span>    G <span style="color:#f92672">=</span> nx<span style="color:#f92672">.</span>Graph()
</span></span><span style="display:flex;"><span>    l <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> index, row <span style="color:#f92672">in</span> result<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>        l<span style="color:#f92672">.</span>append((test_data[<span style="color:#e6db74">&#39;title&#39;</span>], row[<span style="color:#e6db74">&#39;title&#39;</span>], {<span style="color:#e6db74">&#39;weight&#39;</span>:row[<span style="color:#e6db74">&#39;total_score&#39;</span>]}))
</span></span><span style="display:flex;"><span>    G<span style="color:#f92672">.</span>add_edges_from(l)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Edge weight and color</span>
</span></span><span style="display:flex;"><span>    elarge<span style="color:#f92672">=</span>[(u,v) <span style="color:#66d9ef">for</span> (u,v,d) <span style="color:#f92672">in</span> G<span style="color:#f92672">.</span>edges(data<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>) <span style="color:#66d9ef">if</span> d[<span style="color:#e6db74">&#39;weight&#39;</span>] <span style="color:#f92672">&gt;</span> result[<span style="color:#e6db74">&#39;total_score&#39;</span>]<span style="color:#f92672">.</span>quantile(<span style="color:#ae81ff">0.8</span>)]
</span></span><span style="display:flex;"><span>    esmall<span style="color:#f92672">=</span>[(u,v) <span style="color:#66d9ef">for</span> (u,v,d) <span style="color:#f92672">in</span> G<span style="color:#f92672">.</span>edges(data<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>) <span style="color:#66d9ef">if</span> d[<span style="color:#e6db74">&#39;weight&#39;</span>] <span style="color:#f92672">&lt;=</span> result[<span style="color:#e6db74">&#39;total_score&#39;</span>]<span style="color:#f92672">.</span>quantile(<span style="color:#ae81ff">0.8</span>)]
</span></span><span style="display:flex;"><span>    pos <span style="color:#f92672">=</span> nx<span style="color:#f92672">.</span>spring_layout(G) <span style="color:#75715e"># positions for all nodes</span>
</span></span><span style="display:flex;"><span>    nx<span style="color:#f92672">.</span>draw_networkx_nodes(G, pos, node_size<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>, node_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#AED6F1&#39;</span>, alpha<span style="color:#f92672">=</span><span style="color:#ae81ff">0.6</span>)
</span></span><span style="display:flex;"><span>    nx<span style="color:#f92672">.</span>draw_networkx_edges(G, pos, edgelist<span style="color:#f92672">=</span>elarge, width<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>    nx<span style="color:#f92672">.</span>draw_networkx_edges(G, pos, edgelist<span style="color:#f92672">=</span>esmall, width<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>, alpha<span style="color:#f92672">=</span><span style="color:#ae81ff">0.5</span>, edge_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;r&#39;</span>, style<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dashed&#39;</span>)
</span></span><span style="display:flex;"><span>    nx<span style="color:#f92672">.</span>draw_networkx_labels(G, pos, font_size<span style="color:#f92672">=</span><span style="color:#ae81ff">25</span>, font_family<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sans-serif&#39;</span>)
</span></span><span style="display:flex;"><span>    plt<span style="color:#f92672">.</span>axis(<span style="color:#e6db74">&#39;off&#39;</span>)
</span></span><span style="display:flex;"><span>    plt<span style="color:#f92672">.</span>show() <span style="color:#75715e"># display</span>
</span></span></code></pre></div></br>
<h4 id="1-recommender-system-based-on-vector-space-model">1. Recommender System based on Vector Space Model</h4>
<p>Vector Space Model which uses the proximity between vectors based on angle between them can be used to implememt content-based recommendation system. Angles between the vectors can be computed by implementing Cosine Similarity measure. A recommender System based on Vector Space Model which computes the similarity between TF-IDF scores for keywords is implemented below.</p>
<p>The recommender system does a decent job in recommending movies although we haven&rsquo;t taken into consideration the genres, actors and director which can play an important role in providing more relevant recommendation.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.metrics.pairwise <span style="color:#f92672">import</span> cosine_similarity
</span></span><span style="display:flex;"><span>similarity_matrix <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(cosine_similarity(keys), columns<span style="color:#f92672">=</span>keys<span style="color:#f92672">.</span>index)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">VSMbasedRecommendationEngine</span>(movie_index):
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">=</span> similarity_matrix<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span>[movie_index], ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)[movie_index]<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">26</span>)<span style="color:#f92672">.</span>tail(<span style="color:#ae81ff">25</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Return data in appropriate format (Same format as the below recommendation engine)</span>
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> movies<span style="color:#f92672">.</span>iloc[s<span style="color:#f92672">.</span>index, :]
</span></span><span style="display:flex;"><span>    res[<span style="color:#e6db74">&#39;total_score&#39;</span>] <span style="color:#f92672">=</span> s
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_test <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>sample(n<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># df_test = df[df.index == 18]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> index, row <span style="color:#f92672">in</span> df_test<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> VSMbasedRecommendationEngine(index)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># showResultsInTabularForm(row, result)</span>
</span></span><span style="display:flex;"><span>    showResultsInGraphicalForm(row, result)
</span></span></code></pre></div><img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_53_1.png" alt="">
</br>
<h4 id="2-correlation-based-recommender-system">2. Correlation based Recommender System</h4>
<p>The idea is to use the key fields and assign them a weight (based on the domain knowledge) and find the correlation between the movie for which we have to recommend and the rest of the movies. The fields that will be used are genres, Director, Actors and Keywords. original_language is used to filter the movies for recommendation. Popularity and vote_average will be used to give priority to the recommendations. The weights for the corresponding fields are as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>weights <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;genres&#39;</span> : <span style="color:#ae81ff">0.3</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#39;director&#39;</span> : <span style="color:#ae81ff">0.25</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#39;actors&#39;</span> : <span style="color:#ae81ff">0.25</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#39;Keywords&#39;</span> : <span style="color:#ae81ff">0.2</span>}
</span></span><span style="display:flex;"><span>weights
</span></span></code></pre></div><pre><code>{'Keywords': 0.2, 'actors': 0.25, 'director': 0.25, 'genres': 0.3}
</code></pre>
<p>The correlation based recommendation system which takes into account language, genres, actors and director along with keywords shows more relevent recommendation as compared to the one which takes only keywords into account.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;genres&#39;</span>, <span style="color:#e6db74">&#39;budget&#39;</span>, <span style="color:#e6db74">&#39;homepage&#39;</span>, <span style="color:#e6db74">&#39;keywords&#39;</span>, <span style="color:#e6db74">&#39;overview&#39;</span>, <span style="color:#e6db74">&#39;production_companies&#39;</span>, <span style="color:#e6db74">&#39;production_countries&#39;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;release_date&#39;</span>, <span style="color:#e6db74">&#39;revenue&#39;</span>, <span style="color:#e6db74">&#39;runtime&#39;</span>, <span style="color:#e6db74">&#39;spoken_languages&#39;</span>, <span style="color:#e6db74">&#39;status&#39;</span>, <span style="color:#e6db74">&#39;tagline&#39;</span>, <span style="color:#e6db74">&#39;vote_count&#39;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;release_year&#39;</span>, <span style="color:#e6db74">&#39;release_month&#39;</span>, <span style="color:#e6db74">&#39;release_day&#39;</span>,], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">correlationBasedRecommendationEngine</span>(df, movie_id, weights, genres):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Find the cluster with the most number of movies</span>
</span></span><span style="display:flex;"><span>    ignore_cluster <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby(df[<span style="color:#e6db74">&#39;keyword_cluster&#39;</span>])[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>count()<span style="color:#f92672">.</span>idxmax(axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Make a copy of dataframe to store the results (drop the row for the original movie_id)</span>
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span>drop(res[res[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">==</span> movie_id]<span style="color:#f92672">.</span>index)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Drop the rows for the movies which do not have the same original_language</span>
</span></span><span style="display:flex;"><span>    original_language <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">==</span> movie_id][<span style="color:#e6db74">&#39;original_language&#39;</span>]<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span>drop(res[res[<span style="color:#e6db74">&#39;original_language&#39;</span>] <span style="color:#f92672">!=</span> original_language]<span style="color:#f92672">.</span>index)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Extract list of actors from the movie</span>
</span></span><span style="display:flex;"><span>    actor_columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;actor_0&#39;</span>, <span style="color:#e6db74">&#39;actor_1&#39;</span>, <span style="color:#e6db74">&#39;actor_2&#39;</span>, <span style="color:#e6db74">&#39;actor_3&#39;</span>, <span style="color:#e6db74">&#39;actor_4&#39;</span>]
</span></span><span style="display:flex;"><span>    df[actor_columns] <span style="color:#f92672">=</span> df[actor_columns]<span style="color:#f92672">.</span>fillna(<span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>    actors_list <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">==</span> movie_id][actor_columns]<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>tolist()[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    actors_list <span style="color:#f92672">=</span> [item<span style="color:#f92672">.</span>strip() <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> actors_list]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Calculate score based on actors</span>
</span></span><span style="display:flex;"><span>    res[actor_columns] <span style="color:#f92672">=</span> res[actor_columns]<span style="color:#f92672">.</span>astype(str)
</span></span><span style="display:flex;"><span>    res[<span style="color:#e6db74">&#39;actors_score&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> index, row <span style="color:#f92672">in</span> res<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>        l <span style="color:#f92672">=</span> row[actor_columns]<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>tolist()
</span></span><span style="display:flex;"><span>        l <span style="color:#f92672">=</span> [item<span style="color:#f92672">.</span>strip() <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> l]
</span></span><span style="display:flex;"><span>        score <span style="color:#f92672">=</span> compare_actors(actors_list, l)
</span></span><span style="display:flex;"><span>        res<span style="color:#f92672">.</span>at[index,<span style="color:#e6db74">&#39;actors_score&#39;</span>] <span style="color:#f92672">=</span> score
</span></span><span style="display:flex;"><span>    res[<span style="color:#e6db74">&#39;actors_score&#39;</span>] <span style="color:#f92672">=</span> res[<span style="color:#e6db74">&#39;actors_score&#39;</span>] <span style="color:#f92672">*</span> weights<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;actors&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Calculate score based on director</span>
</span></span><span style="display:flex;"><span>    director <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">==</span> movie_id][<span style="color:#e6db74">&#39;Director&#39;</span>]<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    res[<span style="color:#e6db74">&#39;director_score&#39;</span>] <span style="color:#f92672">=</span> (res[<span style="color:#e6db74">&#39;Director&#39;</span>] <span style="color:#f92672">==</span> director) <span style="color:#f92672">*</span> weights<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;director&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Calculate score based on keywords when keyword cluster does not belong to most frequent cluster</span>
</span></span><span style="display:flex;"><span>    most_freq_cluster <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby(df[<span style="color:#e6db74">&#39;keyword_cluster&#39;</span>])[<span style="color:#e6db74">&#39;id&#39;</span>]<span style="color:#f92672">.</span>count()<span style="color:#f92672">.</span>idxmax(axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    movie_cluster <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">==</span> movie_id][<span style="color:#e6db74">&#39;keyword_cluster&#39;</span>]<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    res[<span style="color:#e6db74">&#39;keyword_score&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> movie_cluster <span style="color:#f92672">!=</span> most_freq_cluster:
</span></span><span style="display:flex;"><span>        res[<span style="color:#e6db74">&#39;keyword_score&#39;</span>] <span style="color:#f92672">=</span> (res[<span style="color:#e6db74">&#39;keyword_cluster&#39;</span>] <span style="color:#f92672">==</span> movie_cluster) <span style="color:#f92672">*</span> weights<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;Keywords&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Calculate score based on genres</span>
</span></span><span style="display:flex;"><span>    v <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(df[df[<span style="color:#e6db74">&#39;id&#39;</span>] <span style="color:#f92672">==</span> movie_id][genres]<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>tolist())
</span></span><span style="display:flex;"><span>    res[<span style="color:#e6db74">&#39;genre_score&#39;</span>] <span style="color:#f92672">=</span> (res[genres]<span style="color:#f92672">.</span>dot(v) <span style="color:#f92672">/</span> v<span style="color:#f92672">.</span>size) <span style="color:#f92672">*</span> weights<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;genres&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Total score</span>
</span></span><span style="display:flex;"><span>    res[<span style="color:#e6db74">&#39;total_score&#39;</span>] <span style="color:#f92672">=</span> res[[<span style="color:#e6db74">&#39;actors_score&#39;</span>, <span style="color:#e6db74">&#39;director_score&#39;</span>, <span style="color:#e6db74">&#39;keyword_score&#39;</span>, <span style="color:#e6db74">&#39;genre_score&#39;</span>]]<span style="color:#f92672">.</span>sum(axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;total_score&#39;</span>, <span style="color:#e6db74">&#39;vote_average&#39;</span>, <span style="color:#e6db74">&#39;popularity&#39;</span>], ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">25</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">compare_actors</span>(actors1, actors2):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> len(set(actors1) <span style="color:#f92672">&amp;</span> set(actors2)) <span style="color:#f92672">/</span> len(actors1)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_test <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>sample(n<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># df_test = df[df.index == 18]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> index, row <span style="color:#f92672">in</span> df_test<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> correlationBasedRecommendationEngine(df, row[<span style="color:#e6db74">&#39;id&#39;</span>], weights, df_genres[<span style="color:#e6db74">&#39;name&#39;</span>]<span style="color:#f92672">.</span>tolist())<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">25</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># showResultsInTabularForm(row, result)</span>
</span></span><span style="display:flex;"><span>    showResultsInGraphicalForm(row, result)
</span></span></code></pre></div><img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_60_0.png" alt="">
</br>
<h3 id="comparison-of-results">Comparison of Results</h3>
<p>It is evident that the correlation based recommendation system has a quite improved performance when compared to the first one. Movies recommended by it have a decent match when compared to the ones which are suggested by Google&rsquo;s People also search for. With the amount of data available and the lack of the knowledge about the specific taste of individual users, the implemented recommendation system does a pretty decent job.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_test <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>sample(n<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># df_test = df[df.index == 3228]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> index, row <span style="color:#f92672">in</span> df_test<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>    result1 <span style="color:#f92672">=</span> correlationBasedRecommendationEngine(df, row[<span style="color:#e6db74">&#39;id&#39;</span>], weights, df_genres[<span style="color:#e6db74">&#39;name&#39;</span>]<span style="color:#f92672">.</span>tolist())<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">25</span>)
</span></span><span style="display:flex;"><span>    result2 <span style="color:#f92672">=</span> VSMbasedRecommendationEngine(index)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># showResultsInTabularForm(row, result)</span>
</span></span><span style="display:flex;"><span>    showResultsInGraphicalForm(row, result1)
</span></span><span style="display:flex;"><span>    showResultsInGraphicalForm(row, result2)
</span></span></code></pre></div><img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_63_1.png" alt="">
<img class="pure-img" src="/img/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_files/Introductory%20Data%20Analysis%20and%20Recommendation%20Engine_63_2.png" alt="">
</br>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>movies[movies[<span style="color:#e6db74">&#39;original_title&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;The Fighter&#39;</span>]
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>budget</th>
      <th>genres</th>
      <th>homepage</th>
      <th>id</th>
      <th>keywords</th>
      <th>original_language</th>
      <th>original_title</th>
      <th>overview</th>
      <th>popularity</th>
      <th>production_companies</th>
      <th>...</th>
      <th>runtime</th>
      <th>spoken_languages</th>
      <th>status</th>
      <th>tagline</th>
      <th>title</th>
      <th>vote_average</th>
      <th>vote_count</th>
      <th>release_year</th>
      <th>release_month</th>
      <th>release_day</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2917</th>
      <td>25000000</td>
      <td>[{'id': 18, 'name': 'Drama'}]</td>
      <td>http://www.thefightermovie.com</td>
      <td>45317</td>
      <td>sport irish_american documentary_crew lowell_m...</td>
      <td>en</td>
      <td>The Fighter</td>
      <td>The Fighter, is a drama about boxer "Irish" Mi...</td>
      <td>31.019381</td>
      <td>[{'name': 'Paramount Pictures', 'id': 4}]</td>
      <td>...</td>
      <td>116.0</td>
      <td>[{'iso_639_1': 'en', 'name': 'English'}]</td>
      <td>Released</td>
      <td>Every dream deserves a fighting chance.</td>
      <td>The Fighter</td>
      <td>7.2</td>
      <td>1486</td>
      <td>2010.0</td>
      <td>12.0</td>
      <td>17.0</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 23 columns</p>
</div>


                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/unsupervised-learning_part6/" data-toggle="tooltip" data-placement="top" title="ISLR Chapter 10: Unsupervised Learning (Part 6: Exercises - Applied)">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/chapter-1-statistical-thinking-for-programmers/" data-toggle="tooltip" data-placement="top" title="Think Stats: Chapter 1">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>
                

            </div>

            
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        <a href="/tags/alternate-hypothesis" title="alternate-hypothesis">
                            alternate-hypothesis
                        </a>
                        
                        
                        
                        <a href="/tags/applied" title="applied">
                            applied
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/basis" title="basis">
                            basis
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/bernoulli-distribution" title="bernoulli-distribution">
                            bernoulli-distribution
                        </a>
                        
                        
                        
                        <a href="/tags/binomial-distribution" title="binomial-distribution">
                            binomial-distribution
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/cdf" title="cdf">
                            cdf
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/classification" title="classification">
                            classification
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/column-space" title="column-space">
                            column-space
                        </a>
                        
                        
                        
                        <a href="/tags/conceptual" title="conceptual">
                            conceptual
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/confidence-intervals" title="confidence-intervals">
                            confidence-intervals
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/dimension" title="dimension">
                            dimension
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/exercises" title="exercises">
                            exercises
                        </a>
                        
                        
                        
                        <a href="/tags/exponential-distribution" title="exponential-distribution">
                            exponential-distribution
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/gilbert-strang" title="gilbert-strang">
                            gilbert-strang
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/hypothesis-testing" title="hypothesis-testing">
                            hypothesis-testing
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/islr" title="islr">
                            islr
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/linear-algebra" title="linear-algebra">
                            linear-algebra
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/linear-equations" title="linear-equations">
                            linear-equations
                        </a>
                        
                        
                        
                        <a href="/tags/linear-model-selection" title="linear-model-selection">
                            linear-model-selection
                        </a>
                        
                        
                        
                        <a href="/tags/linear-regression" title="linear-regression">
                            linear-regression
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/matrix-factorization" title="matrix-factorization">
                            matrix-factorization
                        </a>
                        
                        
                        
                        <a href="/tags/matrix-multiplications" title="matrix-multiplications">
                            matrix-multiplications
                        </a>
                        
                        
                        
                        <a href="/tags/matrix-space" title="matrix-space">
                            matrix-space
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/mean" title="mean">
                            mean
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/moving-beyond-linearity" title="moving-beyond-linearity">
                            moving-beyond-linearity
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/normal-distribution" title="normal-distribution">
                            normal-distribution
                        </a>
                        
                        
                        
                        <a href="/tags/null-hypothesis" title="null-hypothesis">
                            null-hypothesis
                        </a>
                        
                        
                        
                        <a href="/tags/null-space" title="null-space">
                            null-space
                        </a>
                        
                        
                        
                        <a href="/tags/one-tailed-test" title="one-tailed-test">
                            one-tailed-test
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/pmf" title="pmf">
                            pmf
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/power" title="power">
                            power
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/random-variables" title="random-variables">
                            random-variables
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/regularization" title="regularization">
                            regularization
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/resampling" title="resampling">
                            resampling
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/statistical-learning" title="statistical-learning">
                            statistical-learning
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/students-t-distribution" title="students-t-distribution">
                            students-t-distribution
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/subspace" title="subspace">
                            subspace
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/support-vector-machines" title="support-vector-machines">
                            support-vector-machines
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/think-stats" title="think-stats">
                            think-stats
                        </a>
                        
                        
                        
                        <a href="/tags/tree-based-methods" title="tree-based-methods">
                            tree-based-methods
                        </a>
                        
                        
                        
                        <a href="/tags/two-tailed-test" title="two-tailed-test">
                            two-tailed-test
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/unsupervised-learning" title="unsupervised-learning">
                            unsupervised-learning
                        </a>
                        
                        
                        
                        <a href="/tags/variance" title="variance">
                            variance
                        </a>
                        
                        
                        
                        <a href="/tags/vector-space" title="vector-space">
                            vector-space
                        </a>
                        
                        
                        
                        
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="Amit Rajan" >
                           <span class="fa-stack fa-lg">
                               <i class="fas fa-circle fa-stack-2x"></i>
                               <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:amitrajan012@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    

                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/amitrajan012">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/amit-rajan-1343aaba/">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; Amit Rajan 2022
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>









<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
            _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync("\/js\/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>


</body>
</html>
